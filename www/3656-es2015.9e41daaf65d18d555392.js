(self.webpackChunkpush_notification=self.webpackChunkpush_notification||[]).push([[3656],{645:function(e,n,t){"use strict";t.r(n),t.d(n,{DashboardPageModule:function(){return U}});var o,r=t(1116),i=t(1462),s=t(4812),u=t(7767);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global,function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(o||(o={}));class a extends Error{constructor(e,n){super(e),this.message=e,this.code=n}}const c=e=>{var n,t;return(null==e?void 0:e.androidBridge)?"android":(null===(t=null===(n=null==e?void 0:e.webkit)||void 0===n?void 0:n.messageHandlers)||void 0===t?void 0:t.bridge)?"ios":"web"},l=(0,(e=>e.Capacitor=(e=>{var n,t,r,i,s;const u=e.Capacitor||{},l=u.Plugins=u.Plugins||{},d=e.CapacitorPlatforms,f=(null===(n=null==d?void 0:d.currentPlatform)||void 0===n?void 0:n.getPlatform)||(()=>c(e)),p=(null===(t=null==d?void 0:d.currentPlatform)||void 0===t?void 0:t.isNativePlatform)||(()=>"web"!==c(e)),g=(null===(r=null==d?void 0:d.currentPlatform)||void 0===r?void 0:r.isPluginAvailable)||(e=>{const n=v.get(e);return!!(null==n?void 0:n.platforms.has(f()))||!!h(e)}),h=(null===(i=null==d?void 0:d.currentPlatform)||void 0===i?void 0:i.getPluginHeader)||(e=>{var n;return null===(n=u.PluginHeaders)||void 0===n?void 0:n.find(n=>n.name===e)}),v=new Map,m=(null===(s=null==d?void 0:d.currentPlatform)||void 0===s?void 0:s.registerPlugin)||((e,n={})=>{const t=v.get(e);if(t)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),t.proxy;const r=f(),i=h(e);let s;const c=t=>{let c;const l=(...l)=>{const d=(async()=>(!s&&r in n&&(s=s="function"==typeof n[r]?await n[r]():n[r]),s))().then(n=>{const s=((n,t)=>{var s,c;if(!i){if(n)return null===(c=n[t])||void 0===c?void 0:c.bind(n);throw new a(`"${e}" plugin is not implemented on ${r}`,o.Unimplemented)}{const o=null==i?void 0:i.methods.find(e=>t===e.name);if(o)return"promise"===o.rtype?n=>u.nativePromise(e,t.toString(),n):(n,o)=>u.nativeCallback(e,t.toString(),n,o);if(n)return null===(s=n[t])||void 0===s?void 0:s.bind(n)}})(n,t);if(s){const e=s(...l);return c=null==e?void 0:e.remove,e}throw new a(`"${e}.${t}()" is not implemented on ${r}`,o.Unimplemented)});return"addListener"===t&&(d.remove=async()=>c()),d};return l.toString=()=>`${t.toString()}() { [capacitor code] }`,Object.defineProperty(l,"name",{value:t,writable:!1,configurable:!1}),l},d=c("addListener"),p=c("removeListener"),g=(e,n)=>{const t=d({eventName:e},n),o=async()=>{const o=await t;p({eventName:e,callbackId:o},n)},r=new Promise(e=>t.then(()=>e({remove:o})));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()},r},m=new Proxy({},{get(e,n){switch(n){case"$$typeof":return;case"addListener":return i?g:d;case"removeListener":return p;default:return c(n)}}});return l[e]=m,v.set(e,{name:e,proxy:m,platforms:new Set([...Object.keys(n),...i?[r]:[]])}),m});return u.convertFileSrc||(u.convertFileSrc=e=>e),u.getPlatform=f,u.handleError=n=>e.console.error(n),u.isNativePlatform=p,u.isPluginAvailable=g,u.pluginMethodNoop=(e,n,t)=>Promise.reject(`${t} does not have an implementation of "${n}".`),u.registerPlugin=m,u.Exception=a,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u.platform=u.getPlatform(),u.isNative=u.isNativePlatform(),u})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).registerPlugin)("PushNotifications",{});var d=t(5366),f=t(2590),p=t(7740),g=function(e,n){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(e,n)},h=t(8318),v=t(7254),m={error:"cordova_not_available"},w={error:"plugin_not_installed"};function b(e){if("undefined"!=typeof window&&window.angular){var n=window.document,t=window.angular.element(n.querySelector("[ng-app]")||n.body).injector();if(t)return t.get("$q")(function(n,t){e(n,t)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(n,t){e(n,t)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function y(e,n,t,o){var r,i;void 0===o&&(o={});var s=b(function(s,u){r=o.destruct?k(e,n,t,o,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s(e)},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return u(e)}):k(e,n,t,o,s,u),i=u});return r&&r.error&&(s.catch(function(){}),"function"==typeof i&&i(r.error)),s}function P(e,n,t,o){return void 0===o&&(o={}),b(function(r,i){var s=k(e,n,t,o);s?s.error?i(s.error):s.then&&s.then(r).catch(i):i({error:"unexpected_error"})})}function N(e,n,t,o){return void 0===o&&(o={}),new h.y(function(r){var i;return(i=o.destruct?k(e,n,t,o,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r.next(e)},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r.error(e)}):k(e,n,t,o,r.next.bind(r),r.error.bind(r)))&&i.error&&(r.error(i.error),r.complete()),function(){try{if(o.clearFunction)return o.clearWithArgs?k(e,o.clearFunction,t,o,r.next.bind(r),r.error.bind(r)):k(e,o.clearFunction,[])}catch(i){console.warn("Unable to clear the previous observable watch for",e.constructor.getPluginName(),n),console.warn(i)}}})}function x(e,n){return n="undefined"!=typeof window&&n?C(window,n):n||("undefined"!=typeof window?window:{}),(0,v.R)(n,e)}function T(e,n,t){var o,r,i;return"string"==typeof e?o=e:(o=e.constructor.getPluginRef(),t=e.constructor.getPluginName(),i=e.constructor.getPluginInstallName()),!(!(r=A(o))||n&&void 0===r[n])||("undefined"!=typeof window&&window.cordova?(function(e,n,t){t?console.warn("Native: tried calling "+e+"."+t+", but the "+e+" plugin is not installed."):console.warn("Native: tried accessing the "+e+" plugin but it's not installed."),n&&console.warn("Install the "+e+" plugin: 'ionic cordova plugin add "+n+"'")}(t,i,n),w):(function(e,n){"undefined"==typeof process&&(n?console.warn("Native: tried calling "+e+"."+n+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"):console.warn("Native: tried accessing the "+e+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"))}(t,n),m))}function k(e,n,t,o,r,i){void 0===o&&(o={}),t=function(e,n,t,o){if(void 0===n&&(n={}),n.sync)return e;if("reverse"===n.callbackOrder)e.unshift(o),e.unshift(t);else if("node"===n.callbackStyle)e.push(function(e,n){e?o(e):t(n)});else if("object"===n.callbackStyle&&n.successName&&n.errorName){var r={};r[n.successName]=t,r[n.errorName]=o,e.push(r)}else if(void 0!==n.successIndex||void 0!==n.errorIndex){var i=function(){n.successIndex>e.length?e[n.successIndex]=t:e.splice(n.successIndex,0,t)},s=function(){n.errorIndex>e.length?e[n.errorIndex]=o:e.splice(n.errorIndex,0,o)};n.successIndex>n.errorIndex?(s(),i()):(i(),s())}else e.push(t),e.push(o);return e}(t,o,r,i);var s=T(e,n);if(!0===s){var u=A(e.constructor.getPluginRef());return u[n].apply(u,t)}return s}function A(e){return"undefined"!=typeof window?C(window,e):null}function C(e,n){for(var t=n.split("."),o=e,r=0;r<t.length;r++){if(!o)return null;o=o[t[r]]}return o}var I=function(){function e(){}return e.installed=function(){return!0===T(this.pluginRef)},e.getPlugin=function(){return"undefined"!=typeof window?function(e,n){for(var t=n.split("."),o=e,r=0;r<t.length;r++){if(!o)return null;o=o[t[r]]}return o}(window,this.pluginRef):null},e.getPluginName=function(){return this.pluginName},e.getPluginRef=function(){return this.pluginRef},e.getPluginInstallName=function(){return this.plugin},e.getSupportedPlatforms=function(){return this.platforms},e.pluginName="",e.pluginRef="",e.plugin="",e.repo="",e.platforms=[],e.install="",e}();function S(e,n,t,o){return function(e,n,t){return void 0===t&&(t={}),function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return t.sync?k(e,n,o,t):t.observable?N(e,n,o,t):t.eventObservable&&t.event?x(t.event,t.element):t.otherPromise?P(e,n,o,t):y(e,n,o,t)}}(e,n,t).apply(this,o)}!function(){if("undefined"==typeof process){var e="undefined"!=typeof window?window:{},n=Date.now(),t=!1;e.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-n)+" ms"),t=!0}),setTimeout(function(){!t&&e.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}();var Z=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}g(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,e),n.prototype.getAPNSToken=function(){return S(this,"getAPNSToken",{},arguments)},n.prototype.getToken=function(){return S(this,"getToken",{},arguments)},n.prototype.onTokenRefresh=function(){return S(this,"onTokenRefresh",{observable:!0},arguments)},n.prototype.subscribeToTopic=function(e){return S(this,"subscribeToTopic",{},arguments)},n.prototype.unsubscribeFromTopic=function(e){return S(this,"unsubscribeFromTopic",{},arguments)},n.prototype.hasPermission=function(){return S(this,"hasPermission",{},arguments)},n.prototype.onNotification=function(){return S(this,"onNotification",{observable:!0,successIndex:0,errorIndex:2},arguments)},n.prototype.clearAllNotifications=function(){return S(this,"clearAllNotifications",{},arguments)},n.prototype.requestPushPermissionIOS=function(e){return S(this,"requestPushPermissionIOS",{},arguments)},n.prototype.createNotificationChannelAndroid=function(e){return S(this,"createNotificationChannelAndroid",{},arguments)},n.pluginName="FCM",n.plugin="cordova-plugin-fcm-with-dependecy-updated",n.pluginRef="FCMPlugin",n.repo="https://github.com/andrehtissot/cordova-plugin-fcm-with-dependecy-updated",n.platforms=["Android","iOS"],n.\u0275fac=function(){var e;return function(t){return(e||(e=d.n5z(n)))(t||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:function(e){return n.\u0275fac(e)}}),n}(I);function _(e,n){if(1&e&&(d.TgZ(0,"ion-item"),d.TgZ(1,"ion-label"),d._uU(2),d.qZA(),d.TgZ(3,"ion-checkbox",6),d.NdJ("ngModelChange",function(e){return n.$implicit.isChecked=e}),d.qZA(),d.qZA()),2&e){const e=n.$implicit;d.xp6(2),d.Oqu(e.displayName),d.xp6(1),d.Q6J("ngModel",e.isChecked)}}function O(e,n){if(1&e){const e=d.EpF();d.ynx(0),d.TgZ(1,"ion-list"),d.YNc(2,_,4,2,"ion-item",3),d.TgZ(3,"ion-item"),d.TgZ(4,"ion-textarea",4),d.NdJ("ngModelChange",function(n){return d.CHM(e),d.oxw().text=n}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(5,"ion-button",5),d.NdJ("click",function(){return d.CHM(e),d.oxw().send()}),d._uU(6,"Send notification"),d.qZA(),d.BQk()}if(2&e){const e=d.oxw();d.xp6(2),d.Q6J("ngForOf",e.users),d.xp6(2),d.Q6J("ngModel",e.text)}}function M(e,n){1&e&&(d.TgZ(0,"div",7),d._UZ(1,"ion-spinner",8),d.qZA())}const q=[{path:"",component:(()=>{class e{constructor(e,n,t,o){this.authService=e,this.afStore=n,this.fcm=t,this.platform=o,this.users=[],this.text=""}ngOnInit(){this.getUsers(),this.platform.ready().then(()=>{this.fcm.getToken().then(e=>{console.log(e)}),this.fcm.onNotification().subscribe(e=>{console.log(e),e.wasTapped?console.log("Received in background"):console.log("Received in foreground")}),this.fcm.onTokenRefresh().subscribe(e=>{console.log(e)})}),l.requestPermissions().then(e=>{"granted"===e.receive&&l.register()}),l.addListener("registration",e=>{alert("Push registration success, token: "+e.value)}),l.addListener("registrationError",e=>{alert("Error on registration: "+JSON.stringify(e))}),l.addListener("pushNotificationReceived",e=>{alert("Push received: "+JSON.stringify(e))}),l.addListener("pushNotificationActionPerformed",e=>{alert("Push action performed: "+JSON.stringify(e))})}getUsers(){this.afStore.collection("users").valueChanges().subscribe(e=>{this.users=e.map(e=>Object.assign(Object.assign({},e),{isChecked:!1}))})}send(){if(this.users&&this.users.length){const e=this.users.filter(e=>e.isChecked);console.log(e,this.text)}}}return e.\u0275fac=function(n){return new(n||e)(d.Y36(f.e),d.Y36(p.ST),d.Y36(Z),d.Y36(s.t4))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-dashboard"]],decls:10,vars:2,consts:[["slot","start"],[4,"ngIf","ngIfElse"],["noData",""],[4,"ngFor","ngForOf"],["placeholder","Message",3,"ngModel","ngModelChange"],["expand","block",3,"click"],["slot","end",3,"ngModel","ngModelChange"],[1,"spinner-group"],["name","lines",1,"spinner-group__spinner"]],template:function(e,n){if(1&e&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar"),d.TgZ(2,"ion-buttons",0),d._UZ(3,"ion-back-button"),d.qZA(),d.TgZ(4,"ion-title"),d._uU(5,"dashboard"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(6,"ion-content"),d.YNc(7,O,7,2,"ng-container",1),d.YNc(8,M,2,0,"ng-template",null,2,d.W1O),d.qZA()),2&e){const e=d.MAs(9);d.xp6(7),d.Q6J("ngIf",n.users&&n.users.length)("ngIfElse",e)}},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.W2,r.O5,s.q_,r.sg,s.Ie,s.g2,s.j9,i.JJ,i.On,s.YG,s.Q$,s.nz,s.w,s.PQ],styles:[".spinner-group[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.spinner-group__spinner[_ngcontent-%COMP%]{width:35px;height:35px}"]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[u.Bz.forChild(q)],u.Bz]}),e})(),U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[r.ez,i.u5,s.Pc,E]]}),e})()}}]);